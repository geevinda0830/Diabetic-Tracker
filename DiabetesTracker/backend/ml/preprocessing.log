2025-03-16 15:12:48,116 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 15:12:48,116 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 15:12:48,116 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 15:12:48,116 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 15:12:48,116 - __main__ - INFO - Starting data processing...
2025-03-16 15:12:48,116 - __main__ - INFO - Processing CSV files from data/raw
2025-03-16 15:12:48,116 - feature_engineering - INFO - Processing file: data/raw/6.csv
2025-03-16 15:12:48,209 - feature_engineering - INFO - Processing patient ID: 570 from file 6.csv
2025-03-16 15:12:49,665 - feature_engineering - INFO - Extracted 10982 glucose readings for patient 570
2025-03-16 15:12:49,673 - feature_engineering - INFO - Using timestamp field ts15 for insulin data
2025-03-16 15:12:49,998 - feature_engineering - INFO - Extracted 326 insulin doses for patient 570
2025-03-16 15:12:49,998 - feature_engineering - INFO - Processing file: data/raw/5.csv
2025-03-16 15:12:50,028 - feature_engineering - INFO - Processing patient ID: 570 from file 5.csv
2025-03-16 15:12:50,096 - feature_engineering - INFO - Extracted 2745 glucose readings for patient 570
2025-03-16 15:12:50,097 - feature_engineering - WARNING - No valid timestamp field found for insulin data for patient 570
2025-03-16 15:12:50,097 - feature_engineering - INFO - Processing file: data/raw/4.csv
2025-03-16 15:12:50,184 - feature_engineering - INFO - Processing patient ID: 563 from file 4.csv
2025-03-16 15:12:51,783 - feature_engineering - INFO - Extracted 12124 glucose readings for patient 563
2025-03-16 15:12:51,784 - feature_engineering - WARNING - No valid timestamp field found for insulin data for patient 563
2025-03-16 15:12:51,784 - feature_engineering - INFO - Processing file: data/raw/1.csv
2025-03-16 15:12:51,812 - feature_engineering - INFO - Processing patient ID: 559 from file 1.csv
2025-03-16 15:12:52,137 - feature_engineering - INFO - Extracted 2514 glucose readings for patient 559
2025-03-16 15:12:52,138 - feature_engineering - WARNING - No valid timestamp field found for insulin data for patient 559
2025-03-16 15:12:52,138 - feature_engineering - INFO - Processing file: data/raw/3.csv
2025-03-16 15:12:52,163 - feature_engineering - INFO - Processing patient ID: 563 from file 3.csv
2025-03-16 15:12:52,223 - feature_engineering - INFO - Extracted 2570 glucose readings for patient 563
2025-03-16 15:12:52,224 - feature_engineering - WARNING - No valid timestamp field found for insulin data for patient 563
2025-03-16 15:12:52,224 - feature_engineering - INFO - Processing file: data/raw/2.csv
2025-03-16 15:12:52,319 - feature_engineering - INFO - Processing patient ID: 559 from file 2.csv
2025-03-16 15:12:53,796 - feature_engineering - INFO - Extracted 10796 glucose readings for patient 559
2025-03-16 15:12:53,800 - feature_engineering - INFO - Using timestamp field ts15 for insulin data
2025-03-16 15:12:54,067 - feature_engineering - INFO - Extracted 152 insulin doses for patient 559
2025-03-16 15:12:54,273 - feature_engineering - INFO - Combined glucose data: 41731 rows
2025-03-16 15:12:54,276 - feature_engineering - INFO - Combined insulin data: 478 rows
2025-03-16 15:12:54,290 - feature_engineering - INFO - Creating glucose prediction training dataset
2025-03-16 15:12:54,326 - feature_engineering - INFO - Created glucose training dataset with 41659 rows and 31 features
2025-03-16 15:12:54,326 - feature_engineering - INFO - Creating insulin prediction training dataset
2025-03-16 15:12:54,327 - feature_engineering - INFO - Created insulin training dataset with 478 rows and 23 features
2025-03-16 15:12:54,563 - feature_engineering - INFO - Saved glucose dataset to /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_glucose_data.csv
2025-03-16 15:12:54,565 - feature_engineering - INFO - Saved insulin dataset to /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_insulin_data.csv
2025-03-16 15:12:54,565 - __main__ - INFO - Data processing completed
2025-03-16 15:14:03,379 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 15:14:03,379 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 15:14:03,379 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 15:14:03,379 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 15:14:03,422 - __main__ - INFO - Loaded glucose data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_glucose_data.csv
2025-03-16 15:14:03,423 - __main__ - INFO - Loaded insulin data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_insulin_data.csv
2025-03-16 15:14:03,423 - __main__ - INFO - Training insulin prediction model...
2025-03-16 15:14:03,423 - insulin_prediction - INFO - Tuning hyperparameters for insulin prediction model
2025-03-16 15:14:09,848 - insulin_prediction - INFO - Best parameters: {'regressor__learning_rate': 0.05, 'regressor__loss': 'huber', 'regressor__max_depth': 4, 'regressor__n_estimators': 50, 'regressor__subsample': 0.9}
2025-03-16 15:14:09,849 - insulin_prediction - INFO - Best cross-validation MAE: 1.8501
2025-03-16 15:14:09,898 - insulin_prediction - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 15:14:09,898 - __main__ - INFO - Training glucose prediction model...
2025-03-16 15:14:09,898 - glucose_prediction_model - INFO - Tuning hyperparameters for glucose prediction model
2025-03-16 15:27:07,291 - __main__ - INFO - Program interrupted by user
2025-03-16 15:27:29,922 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 15:27:29,922 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 15:27:29,922 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 15:27:29,922 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 15:27:29,968 - __main__ - INFO - Loaded glucose data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_glucose_data.csv
2025-03-16 15:27:29,970 - __main__ - INFO - Loaded insulin data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_insulin_data.csv
2025-03-16 15:27:29,970 - __main__ - INFO - Training insulin prediction model...
2025-03-16 15:27:29,970 - insulin_prediction - INFO - Tuning hyperparameters for insulin prediction model
2025-03-16 15:27:36,441 - insulin_prediction - INFO - Best parameters: {'regressor__learning_rate': 0.05, 'regressor__loss': 'huber', 'regressor__max_depth': 4, 'regressor__n_estimators': 50, 'regressor__subsample': 0.9}
2025-03-16 15:27:36,441 - insulin_prediction - INFO - Best cross-validation MAE: 1.8501
2025-03-16 15:27:36,498 - insulin_prediction - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 15:27:36,498 - __main__ - INFO - Training glucose prediction model...
2025-03-16 15:27:36,498 - glucose_prediction_model - INFO - Tuning hyperparameters for glucose prediction model
2025-03-16 17:13:13,544 - __main__ - INFO - Program interrupted by user
2025-03-16 17:14:00,962 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 17:14:00,962 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 17:14:00,962 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 17:14:00,962 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 17:14:01,005 - __main__ - INFO - Loaded glucose data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_glucose_data.csv
2025-03-16 17:14:01,006 - __main__ - INFO - Loaded insulin data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_insulin_data.csv
2025-03-16 17:14:01,007 - __main__ - INFO - Training insulin prediction model...
2025-03-16 17:14:01,007 - insulin_prediction - INFO - Training insulin prediction model
2025-03-16 17:14:01,008 - insulin_prediction - INFO - Training with 478 samples and 13 features
2025-03-16 17:14:01,076 - insulin_prediction - INFO - Top 5 important features: [{'feature': 'carb_intake', 'importance': 0.46632984269802585}, {'feature': 'previous_insulin_dose', 'importance': 0.34761639720861964}, {'feature': 'is_weekend_0', 'importance': 0.08876262055569209}, {'feature': 'is_evening_0', 'importance': 0.018515811883838804}, {'feature': 'is_afternoon_0', 'importance': 0.01708647887287404}]
2025-03-16 17:14:01,078 - insulin_prediction - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 17:14:01,078 - insulin_prediction - INFO - Training metrics: {'mae': 1.6360466979451436, 'rmse': np.float64(2.15872050754176), 'r2': 0.3648978538160076, 'within_0.5_units': np.float64(26.041666666666668), 'within_1.0_units': np.float64(42.70833333333333), 'samples': 478, 'features': 13}
2025-03-16 17:14:01,078 - __main__ - INFO - Training glucose prediction model...
2025-03-16 17:14:01,078 - glucose_prediction_model - INFO - Training glucose prediction model
2025-03-16 17:14:01,078 - glucose_prediction_model - INFO - Training for prediction horizon of 30 minutes
2025-03-16 17:14:01,080 - glucose_prediction_model - INFO - Training with 41659 samples and 26 features
2025-03-16 17:14:21,148 - glucose_prediction_model - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model.joblib
2025-03-16 17:14:21,148 - glucose_prediction_model - INFO - Training metrics: {'mae': 12.047778782835197, 'rmse': np.float64(18.457995825891167), 'r2': 0.9172594000596761, 'within_20_mgdl': np.float64(82.21315410465675), 'within_30_mgdl': np.float64(91.74267882861258), 'samples': 41659, 'features': 26, 'prediction_horizon': 30}
2025-03-16 17:14:21,151 - glucose_prediction_model - INFO - Training glucose prediction model
2025-03-16 17:14:21,151 - glucose_prediction_model - INFO - Training for prediction horizon of 60 minutes
2025-03-16 17:14:21,154 - glucose_prediction_model - INFO - Training with 41659 samples and 26 features
2025-03-16 17:14:41,216 - glucose_prediction_model - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model_60min.joblib
2025-03-16 17:14:41,216 - glucose_prediction_model - INFO - Training metrics: {'mae': 19.062754276938907, 'rmse': np.float64(27.449249070947687), 'r2': 0.8186033512060443, 'within_20_mgdl': np.float64(66.35861737878061), 'within_30_mgdl': np.float64(80.06481036965914), 'samples': 41659, 'features': 26, 'prediction_horizon': 60}
2025-03-16 17:14:41,217 - __main__ - INFO - Model training completed
2025-03-16 17:24:30,352 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 17:24:30,352 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 17:24:30,352 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 17:24:30,352 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 17:24:30,352 - __main__ - INFO - Testing insulin prediction...
2025-03-16 17:24:30,355 - insulin_prediction - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 17:24:30,356 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 17:24:30,356 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 17:24:30,356 - __main__ - INFO - Insulin prediction test result: {'recommendedDosage': 0.0, 'details': {'currentGlucose': 180, 'glucoseDifference': 60, 'carbEffect': 3.9, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6}
2025-03-16 17:24:48,793 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 17:24:48,793 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 17:24:48,793 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 17:24:48,793 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 17:24:48,793 - __main__ - INFO - Testing insulin prediction...
2025-03-16 17:24:48,795 - insulin_prediction - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 17:24:48,796 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 17:24:48,797 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 17:24:48,797 - __main__ - INFO - Insulin prediction test result: {'recommendedDosage': 0.0, 'details': {'currentGlucose': 180, 'glucoseDifference': 60, 'carbEffect': 3.9, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6}
2025-03-16 17:25:19,552 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 17:25:19,552 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 17:25:19,552 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 17:25:19,553 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 17:25:19,553 - __main__ - INFO - Testing glucose prediction for 30 min horizon...
2025-03-16 17:25:19,573 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model.joblib
2025-03-16 17:25:19,575 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'weight', 'hour', 'insulin_to_carb_ratio', 'glucose_rolling_mean', 'glucose_rolling_std', 'day_of_week', 'insulin_sensitivity_factor'}
2025-03-16 17:25:19,575 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 17:25:19,575 - __main__ - INFO - Glucose prediction test result: {'predictedGlucose': 135, 'details': {'insulinEffect': -6.0, 'carbEffect': 3.0, 'exerciseEffect': -2.0}, 'predictionHorizon': 30, 'method': 'rule-based'}
2025-03-16 17:25:19,577 - __main__ - INFO - Testing glucose prediction for 60 min horizon...
2025-03-16 17:25:19,597 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model_60min.joblib
2025-03-16 17:25:19,599 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'weight', 'hour', 'insulin_to_carb_ratio', 'glucose_rolling_mean', 'glucose_rolling_std', 'day_of_week', 'insulin_sensitivity_factor'}
2025-03-16 17:25:19,599 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 17:25:19,599 - __main__ - INFO - Glucose prediction test result: {'predictedGlucose': 130, 'details': {'insulinEffect': -12.0, 'carbEffect': 6.0, 'exerciseEffect': -4.0}, 'predictionHorizon': 60, 'method': 'rule-based'}
2025-03-16 19:47:26,529 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 19:47:26,529 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 19:47:26,529 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 19:47:26,529 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 19:47:26,570 - __main__ - INFO - Loaded glucose data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_glucose_data.csv
2025-03-16 19:47:26,572 - __main__ - INFO - Loaded insulin data from /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed/training_insulin_data.csv
2025-03-16 19:47:26,572 - __main__ - INFO - Training insulin prediction model...
2025-03-16 19:47:26,572 - insulin_prediction - INFO - Tuning hyperparameters for insulin prediction model
2025-03-16 19:47:32,969 - insulin_prediction - INFO - Best parameters: {'regressor__learning_rate': 0.05, 'regressor__loss': 'huber', 'regressor__max_depth': 4, 'regressor__n_estimators': 50, 'regressor__subsample': 0.9}
2025-03-16 19:47:32,969 - insulin_prediction - INFO - Best cross-validation MAE: 1.8501
2025-03-16 19:47:33,019 - insulin_prediction - INFO - Model saved to /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 19:47:33,020 - __main__ - INFO - Training glucose prediction model...
2025-03-16 19:47:33,020 - glucose_prediction_model - INFO - Tuning hyperparameters for glucose prediction model
2025-03-16 21:53:04,559 - __main__ - INFO - Program interrupted by user
2025-03-16 22:11:37,375 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-16 22:11:37,375 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-16 22:11:37,375 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-16 22:11:37,375 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-16 22:11:37,375 - __main__ - INFO - Starting API server on port 5002...
2025-03-16 22:11:37,449 - insulin_prediction - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-16 22:11:37,449 - api - INFO - Insulin model loaded: True
2025-03-16 22:11:37,480 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model.joblib
2025-03-16 22:11:37,481 - api - INFO - 30-min glucose model loaded: True
2025-03-16 22:11:37,510 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model_60min.joblib
2025-03-16 22:11:37,510 - api - INFO - 60-min glucose model loaded: True
2025-03-16 22:11:37,545 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://192.168.1.178:5002
2025-03-16 22:11:37,545 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-16 22:12:47,195 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 22:12:47,195 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 22:12:47,196 - api - INFO - JSON Body: {'currentGlucose': 124, 'insulinDose': 14, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:12:47,196 - api - INFO - Received glucose prediction request: {'currentGlucose': 124, 'insulinDose': 14, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:12:47,204 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 22:12:47,204 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 22:12:47,204 - api - INFO - Glucose prediction result: {'predictedGlucose': 92, 'details': {'insulinEffect': -42.0, 'carbEffect': 12.6, 'exerciseEffect': -2.4}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 8}
2025-03-16 22:12:47,205 - api - INFO - Response: 200 OK
2025-03-16 22:12:47,205 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 22:12:47] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 22:13:06,735 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 22:13:06,735 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 22:13:06,735 - api - INFO - JSON Body: {'currentGlucose': 124, 'insulinDose': 14, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:13:06,736 - api - INFO - Received glucose prediction request: {'currentGlucose': 124, 'insulinDose': 14, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:13:06,740 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 22:13:06,740 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 22:13:06,740 - api - INFO - Glucose prediction result: {'predictedGlucose': 92, 'details': {'insulinEffect': -42.0, 'carbEffect': 12.6, 'exerciseEffect': -2.4}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 4}
2025-03-16 22:13:06,740 - api - INFO - Response: 200 OK
2025-03-16 22:13:06,741 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 22:13:06] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 22:13:56,196 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 22:13:56,196 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 22:13:56,196 - api - INFO - JSON Body: {'currentGlucose': 124, 'insulinDose': 10, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:13:56,196 - api - INFO - Received glucose prediction request: {'currentGlucose': 124, 'insulinDose': 10, 'totalCarbs': 63.2, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 22:13:56,201 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 22:13:56,201 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 22:13:56,201 - api - INFO - Glucose prediction result: {'predictedGlucose': 104, 'details': {'insulinEffect': -30.0, 'carbEffect': 12.6, 'exerciseEffect': -2.4}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 5}
2025-03-16 22:13:56,201 - api - INFO - Response: 200 OK
2025-03-16 22:13:56,202 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 22:13:56] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 22:15:20,418 - api - INFO - Request: POST /api/predict-insulin
2025-03-16 22:15:20,419 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '96', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 22:15:20,419 - api - INFO - JSON Body: {'bloodGlucose': 124, 'carbIntake': 145.1, 'exerciseTime': 30, 'currentInsulinDosage': 3.8, 'weight': 70}
2025-03-16 22:15:20,419 - api - INFO - Received insulin prediction request: {'bloodGlucose': 124, 'carbIntake': 145.1, 'exerciseTime': 30, 'currentInsulinDosage': 3.8, 'weight': 70}
2025-03-16 22:15:20,426 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 22:15:20,426 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 22:15:20,426 - api - INFO - Insulin prediction result: {'recommendedDosage': 10.0, 'details': {'currentGlucose': 124.0, 'glucoseDifference': 4.0, 'carbEffect': 11.2, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 7}
2025-03-16 22:15:20,426 - api - INFO - Response: 200 OK
2025-03-16 22:15:20,427 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 22:15:20] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-16 23:10:44,976 - api - INFO - Request: POST /api/predict-insulin
2025-03-16 23:10:44,977 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:10:44,977 - api - INFO - JSON Body: {'bloodGlucose': 234, 'carbIntake': 314, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:10:44,977 - api - INFO - Received insulin prediction request: {'bloodGlucose': 234, 'carbIntake': 314, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:10:44,983 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 23:10:44,983 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 23:10:44,983 - api - INFO - Insulin prediction result: {'recommendedDosage': 30.0, 'details': {'currentGlucose': 234.0, 'glucoseDifference': 114.0, 'carbEffect': 24.2, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 6}
2025-03-16 23:10:44,984 - api - INFO - Response: 200 OK
2025-03-16 23:10:44,984 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:10:44] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-16 23:11:53,019 - api - INFO - Request: POST /api/predict-insulin
2025-03-16 23:11:53,020 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:11:53,020 - api - INFO - JSON Body: {'bloodGlucose': 134, 'carbIntake': 365, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:11:53,020 - api - INFO - Received insulin prediction request: {'bloodGlucose': 134, 'carbIntake': 365, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:11:53,023 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 23:11:53,023 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 23:11:53,024 - api - INFO - Insulin prediction result: {'recommendedDosage': 32.0, 'details': {'currentGlucose': 134.0, 'glucoseDifference': 14.0, 'carbEffect': 28.1, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 3}
2025-03-16 23:11:53,024 - api - INFO - Response: 200 OK
2025-03-16 23:11:53,024 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:11:53] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-16 23:12:32,267 - api - INFO - Request: POST /api/predict-insulin
2025-03-16 23:12:32,268 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:12:32,268 - api - INFO - JSON Body: {'bloodGlucose': 134, 'carbIntake': 140, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:12:32,268 - api - INFO - Received insulin prediction request: {'bloodGlucose': 134, 'carbIntake': 140, 'exerciseTime': 30, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-16 23:12:32,273 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-16 23:12:32,273 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-16 23:12:32,273 - api - INFO - Insulin prediction result: {'recommendedDosage': 14.5, 'details': {'currentGlucose': 134.0, 'glucoseDifference': 14.0, 'carbEffect': 10.8, 'exerciseReduction': 6.0}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 5}
2025-03-16 23:12:32,274 - api - INFO - Response: 200 OK
2025-03-16 23:12:32,274 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:12:32] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-16 23:13:28,294 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:13:28,294 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '122', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:13:28,295 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 8, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 3, 'predictionHorizon': 60}
2025-03-16 23:13:28,295 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 8, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 3, 'predictionHorizon': 60}
2025-03-16 23:13:28,300 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:13:28,300 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:13:28,300 - api - INFO - Glucose prediction result: {'predictedGlucose': 125, 'details': {'insulinEffect': -24.0, 'carbEffect': 29.2, 'exerciseEffect': -3.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 5}
2025-03-16 23:13:28,300 - api - INFO - Response: 200 OK
2025-03-16 23:13:28,300 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:13:28] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:13:48,580 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:13:48,581 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:13:48,581 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 3, 'predictionHorizon': 60}
2025-03-16 23:13:48,581 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 3, 'predictionHorizon': 60}
2025-03-16 23:13:48,584 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:13:48,584 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:13:48,584 - api - INFO - Glucose prediction result: {'predictedGlucose': 138, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -3.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 4}
2025-03-16 23:13:48,585 - api - INFO - Response: 200 OK
2025-03-16 23:13:48,585 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:13:48] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:13:54,526 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:13:54,527 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:13:54,527 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 23:13:54,527 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-16 23:13:54,531 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:13:54,531 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:13:54,531 - api - INFO - Glucose prediction result: {'predictedGlucose': 138, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -2.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 5}
2025-03-16 23:13:54,532 - api - INFO - Response: 200 OK
2025-03-16 23:13:54,532 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:13:54] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:13:56,343 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:13:56,343 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:13:56,343 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:13:56,343 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 10, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:13:56,348 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:13:56,348 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:13:56,348 - api - INFO - Glucose prediction result: {'predictedGlucose': 140, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -1.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 4}
2025-03-16 23:13:56,348 - api - INFO - Response: 200 OK
2025-03-16 23:13:56,348 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:13:56] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:14:05,512 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:14:05,513 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:14:05,513 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:05,513 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:05,517 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:14:05,517 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:14:05,517 - api - INFO - Glucose prediction result: {'predictedGlucose': 138, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -3.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 5}
2025-03-16 23:14:05,518 - api - INFO - Response: 200 OK
2025-03-16 23:14:05,518 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:14:05] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:14:06,525 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:14:06,526 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:14:06,526 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:06,526 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:06,528 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:14:06,528 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:14:06,528 - api - INFO - Glucose prediction result: {'predictedGlucose': 138, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -3.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 2}
2025-03-16 23:14:06,529 - api - INFO - Response: 200 OK
2025-03-16 23:14:06,529 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:14:06] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-16 23:14:07,128 - api - INFO - Request: POST /api/predict-glucose
2025-03-16 23:14:07,128 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-16 23:14:07,128 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:07,129 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 3.9, 'totalCarbs': 146, 'exerciseDuration': 30, 'exerciseIntensity': 1, 'predictionHorizon': 60}
2025-03-16 23:14:07,133 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'glucose_rolling_mean', 'hour', 'insulin_sensitivity_factor', 'insulin_to_carb_ratio', 'day_of_week', 'weight', 'glucose_rolling_std'}
2025-03-16 23:14:07,133 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-16 23:14:07,133 - api - INFO - Glucose prediction result: {'predictedGlucose': 138, 'details': {'insulinEffect': -11.7, 'carbEffect': 29.2, 'exerciseEffect': -3.0}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 5}
2025-03-16 23:14:07,134 - api - INFO - Response: 200 OK
2025-03-16 23:14:07,134 - werkzeug - INFO - 127.0.0.1 - - [16/Mar/2025 23:14:07] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-17 15:44:42,521 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-17 15:44:42,521 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-17 15:44:42,521 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-17 15:44:42,521 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-17 15:44:42,521 - __main__ - INFO - Starting API server on port 5002...
2025-03-17 15:44:42,607 - insulin_prediction - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-17 15:44:42,608 - api - INFO - Insulin model loaded: True
2025-03-17 15:44:42,632 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model.joblib
2025-03-17 15:44:42,632 - api - INFO - 30-min glucose model loaded: True
2025-03-17 15:44:42,655 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model_60min.joblib
2025-03-17 15:44:42,655 - api - INFO - 60-min glucose model loaded: True
2025-03-17 15:44:42,671 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://192.168.1.178:5002
2025-03-17 15:44:42,671 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 15:44:48,300 - api - INFO - Request: POST /api/predict-insulin
2025-03-17 15:44:48,300 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-17 15:44:48,300 - api - INFO - JSON Body: {'bloodGlucose': 111, 'carbIntake': 85.5, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-17 15:44:48,300 - api - INFO - Received insulin prediction request: {'bloodGlucose': 111, 'carbIntake': 85.5, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-17 15:44:48,307 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-17 15:44:48,307 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-17 15:44:48,308 - api - INFO - Insulin prediction result: {'recommendedDosage': 15.5, 'details': {'currentGlucose': 111.0, 'glucoseDifference': -9.0, 'carbEffect': 6.6, 'exerciseReduction': 2.2}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 7}
2025-03-17 15:44:48,308 - api - INFO - Response: 200 OK
2025-03-17 15:44:48,308 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:48] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-17 15:45:22,743 - api - INFO - Request: POST /api/predict-glucose
2025-03-17 15:45:22,743 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-17 15:45:22,743 - api - INFO - JSON Body: {'currentGlucose': 111, 'insulinDose': 11, 'totalCarbs': 79.1, 'exerciseDuration': 11, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-17 15:45:22,743 - api - INFO - Received glucose prediction request: {'currentGlucose': 111, 'insulinDose': 11, 'totalCarbs': 79.1, 'exerciseDuration': 11, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-17 15:45:22,749 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'hour', 'insulin_sensitivity_factor', 'glucose_rolling_mean', 'weight', 'insulin_to_carb_ratio', 'glucose_rolling_std', 'day_of_week'}
2025-03-17 15:45:22,749 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-17 15:45:22,749 - api - INFO - Glucose prediction result: {'predictedGlucose': 92, 'details': {'insulinEffect': -33.0, 'carbEffect': 15.8, 'exerciseEffect': -2.2}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 6}
2025-03-17 15:45:22,749 - api - INFO - Response: 200 OK
2025-03-17 15:45:22,749 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:45:22] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-17 22:44:01,212 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data
2025-03-17 22:44:01,212 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/raw
2025-03-17 22:44:01,213 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/data/processed
2025-03-17 22:44:01,213 - __main__ - INFO - Created directory: /Users/malithgeevinda/DiabetesTracker/backend/ml/models
2025-03-17 22:44:01,213 - __main__ - INFO - Starting API server on port 5002...
2025-03-17 22:44:01,281 - insulin_prediction - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/insulin_model.joblib
2025-03-17 22:44:01,281 - api - INFO - Insulin model loaded: True
2025-03-17 22:44:01,310 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model.joblib
2025-03-17 22:44:01,310 - api - INFO - 30-min glucose model loaded: True
2025-03-17 22:44:01,338 - glucose_prediction_model - INFO - Model loaded from /Users/malithgeevinda/DiabetesTracker/backend/ml/models/glucose_model_60min.joblib
2025-03-17 22:44:01,338 - api - INFO - 60-min glucose model loaded: True
2025-03-17 22:44:01,346 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://192.168.1.178:5002
2025-03-17 22:44:01,347 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 23:52:06,549 - api - INFO - Request: POST /api/predict-glucose
2025-03-17 23:52:06,551 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '127', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-17 23:52:06,551 - api - INFO - JSON Body: {'currentGlucose': 1233, 'insulinDose': 32, 'totalCarbs': 1005.5, 'exerciseDuration': 23, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-17 23:52:06,552 - api - INFO - Received glucose prediction request: {'currentGlucose': 1233, 'insulinDose': 32, 'totalCarbs': 1005.5, 'exerciseDuration': 23, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-17 23:52:06,570 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'insulin_sensitivity_factor', 'day_of_week', 'hour', 'insulin_to_carb_ratio', 'glucose_rolling_std', 'glucose_rolling_mean', 'weight'}
2025-03-17 23:52:06,570 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-17 23:52:06,571 - api - INFO - Glucose prediction result: {'predictedGlucose': 400, 'details': {'insulinEffect': -96.0, 'carbEffect': 201.1, 'exerciseEffect': -4.6}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 19}
2025-03-17 23:52:06,571 - api - INFO - Response: 200 OK
2025-03-17 23:52:06,571 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 23:52:06] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-18 00:07:57,319 - api - INFO - Request: POST /api/predict-glucose
2025-03-18 00:07:57,321 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '124', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 00:07:57,322 - api - INFO - JSON Body: {'currentGlucose': 123, 'insulinDose': 12, 'totalCarbs': 43.1, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-18 00:07:57,322 - api - INFO - Received glucose prediction request: {'currentGlucose': 123, 'insulinDose': 12, 'totalCarbs': 43.1, 'exerciseDuration': 12, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-18 00:07:57,328 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'insulin_sensitivity_factor', 'day_of_week', 'hour', 'insulin_to_carb_ratio', 'glucose_rolling_std', 'glucose_rolling_mean', 'weight'}
2025-03-18 00:07:57,328 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-18 00:07:57,328 - api - INFO - Glucose prediction result: {'predictedGlucose': 93, 'details': {'insulinEffect': -36.0, 'carbEffect': 8.6, 'exerciseEffect': -2.4}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 7}
2025-03-18 00:07:57,329 - api - INFO - Response: 200 OK
2025-03-18 00:07:57,329 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 00:07:57] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-18 00:08:51,632 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 00:08:51,633 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 00:08:51,633 - api - INFO - JSON Body: {'bloodGlucose': 123, 'carbIntake': 65.2, 'exerciseTime': 32, 'currentInsulinDosage': 23, 'weight': 70}
2025-03-18 00:08:51,633 - api - INFO - Received insulin prediction request: {'bloodGlucose': 123, 'carbIntake': 65.2, 'exerciseTime': 32, 'currentInsulinDosage': 23, 'weight': 70}
2025-03-18 00:08:51,642 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 00:08:51,642 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 00:08:51,643 - api - INFO - Insulin prediction result: {'recommendedDosage': 22.5, 'details': {'currentGlucose': 123.0, 'glucoseDifference': 3.0, 'carbEffect': 5.0, 'exerciseReduction': 6.4}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 9}
2025-03-18 00:08:51,643 - api - INFO - Response: 200 OK
2025-03-18 00:08:51,643 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 00:08:51] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-18 01:50:33,057 - api - INFO - Request: POST /api/predict-glucose
2025-03-18 01:50:33,059 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '122', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 01:50:33,059 - api - INFO - JSON Body: {'currentGlucose': 321, 'insulinDose': 12, 'totalCarbs': 53, 'exerciseDuration': 23, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-18 01:50:33,059 - api - INFO - Received glucose prediction request: {'currentGlucose': 321, 'insulinDose': 12, 'totalCarbs': 53, 'exerciseDuration': 23, 'exerciseIntensity': 2, 'predictionHorizon': 60}
2025-03-18 01:50:33,066 - glucose_prediction_model - ERROR - Error in ML prediction: columns are missing: {'insulin_sensitivity_factor', 'day_of_week', 'hour', 'insulin_to_carb_ratio', 'glucose_rolling_std', 'glucose_rolling_mean', 'weight'}
2025-03-18 01:50:33,066 - glucose_prediction_model - INFO - Falling back to rule-based calculation
2025-03-18 01:50:33,066 - api - INFO - Glucose prediction result: {'predictedGlucose': 291, 'details': {'insulinEffect': -36.0, 'carbEffect': 10.6, 'exerciseEffect': -4.6}, 'predictionHorizon': 60, 'method': 'rule-based', 'processingTime': 7}
2025-03-18 01:50:33,066 - api - INFO - Response: 200 OK
2025-03-18 01:50:33,066 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 01:50:33] "POST /api/predict-glucose HTTP/1.1" 200 -
2025-03-18 02:00:39,020 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 02:00:39,022 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 02:00:39,022 - api - INFO - JSON Body: {'bloodGlucose': 231, 'carbIntake': 31.1, 'exerciseTime': 12, 'currentInsulinDosage': 12, 'weight': 70}
2025-03-18 02:00:39,023 - api - INFO - Received insulin prediction request: {'bloodGlucose': 231, 'carbIntake': 31.1, 'exerciseTime': 12, 'currentInsulinDosage': 12, 'weight': 70}
2025-03-18 02:00:39,028 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 02:00:39,029 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 02:00:39,029 - api - INFO - Insulin prediction result: {'recommendedDosage': 15.0, 'details': {'currentGlucose': 231.0, 'glucoseDifference': 111.0, 'carbEffect': 2.4, 'exerciseReduction': 2.4}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 6}
2025-03-18 02:00:39,029 - api - INFO - Response: 200 OK
2025-03-18 02:00:39,029 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 02:00:39] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-18 02:08:21,625 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 02:08:21,626 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 02:08:21,627 - api - INFO - JSON Body: {'bloodGlucose': 231, 'carbIntake': 54.4, 'exerciseTime': 12, 'currentInsulinDosage': 32, 'weight': 70}
2025-03-18 02:08:21,627 - api - INFO - Received insulin prediction request: {'bloodGlucose': 231, 'carbIntake': 54.4, 'exerciseTime': 12, 'currentInsulinDosage': 32, 'weight': 70}
2025-03-18 02:08:21,633 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 02:08:21,633 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 02:08:21,633 - api - INFO - Insulin prediction result: {'recommendedDosage': 37.0, 'details': {'currentGlucose': 231.0, 'glucoseDifference': 111.0, 'carbEffect': 4.2, 'exerciseReduction': 2.4}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 6}
2025-03-18 02:08:21,633 - api - INFO - Response: 200 OK
2025-03-18 02:08:21,634 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 02:08:21] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-18 03:06:46,367 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 03:06:46,369 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '93', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 03:06:46,370 - api - INFO - JSON Body: {'bloodGlucose': 123, 'carbIntake': 28, 'exerciseTime': 22, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-18 03:06:46,370 - api - INFO - Received insulin prediction request: {'bloodGlucose': 123, 'carbIntake': 28, 'exerciseTime': 22, 'currentInsulinDosage': 8.9, 'weight': 70}
2025-03-18 03:06:46,375 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 03:06:46,375 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 03:06:46,375 - api - INFO - Insulin prediction result: {'recommendedDosage': 7.5, 'details': {'currentGlucose': 123.0, 'glucoseDifference': 3.0, 'carbEffect': 2.2, 'exerciseReduction': 4.4}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 5}
2025-03-18 03:06:46,376 - api - INFO - Response: 200 OK
2025-03-18 03:06:46,376 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 03:06:46] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-18 03:10:31,084 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 03:10:31,086 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 03:10:31,086 - api - INFO - JSON Body: {'bloodGlucose': 213, 'carbIntake': 31.1, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-18 03:10:31,086 - api - INFO - Received insulin prediction request: {'bloodGlucose': 213, 'carbIntake': 31.1, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-18 03:10:31,092 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 03:10:31,093 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 03:10:31,093 - api - INFO - Insulin prediction result: {'recommendedDosage': 13.0, 'details': {'currentGlucose': 213.0, 'glucoseDifference': 93.0, 'carbEffect': 2.4, 'exerciseReduction': 2.2}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 6}
2025-03-18 03:10:31,093 - api - INFO - Response: 200 OK
2025-03-18 03:10:31,093 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 03:10:31] "POST /api/predict-insulin HTTP/1.1" 200 -
2025-03-18 12:44:05,076 - api - INFO - Request: POST /api/predict-insulin
2025-03-18 12:44:05,077 - api - INFO - Headers: {'Content-Type': 'application/json', 'Content-Length': '94', 'Host': '10.0.2.2:5002', 'Connection': 'Keep-Alive', 'Accept-Encoding': 'gzip', 'User-Agent': 'okhttp/4.9.2'}
2025-03-18 12:44:05,078 - api - INFO - JSON Body: {'bloodGlucose': 111, 'carbIntake': 31.1, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-18 12:44:05,078 - api - INFO - Received insulin prediction request: {'bloodGlucose': 111, 'carbIntake': 31.1, 'exerciseTime': 11, 'currentInsulinDosage': 11, 'weight': 70}
2025-03-18 12:44:05,104 - insulin_prediction - ERROR - Error in ML prediction: columns are missing: {'previous_insulin_dose'}
2025-03-18 12:44:05,104 - insulin_prediction - INFO - Falling back to rule-based calculation
2025-03-18 12:44:05,105 - api - INFO - Insulin prediction result: {'recommendedDosage': 11.0, 'details': {'currentGlucose': 111.0, 'glucoseDifference': -9.0, 'carbEffect': 2.4, 'exerciseReduction': 2.2}, 'method': 'rule-based', 'confidence': 0.6, 'processingTime': 27}
2025-03-18 12:44:05,105 - api - INFO - Response: 200 OK
2025-03-18 12:44:05,105 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:44:05] "POST /api/predict-insulin HTTP/1.1" 200 -
